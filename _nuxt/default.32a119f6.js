import{_ as V}from"./nuxt-link.44ca6038.js";import z from"./button.esm.8409976c.js";import L from"./avatar.esm.632e3acd.js";import R from"./badge.esm.6895c8b8.js";import S from"./menu.esm.0b6745b6.js";import A from"./toast.esm.add3f396.js";import{v as F,u as M,x as P,r as x,y as U,J as j,c,a as s,b as o,w as l,q as a,L as q,F as E,o as r,d as h,t as i,P as G,K as I,C as J,n as K,A as g}from"./entry.666009fa.js";import{u as H}from"./global.dfb72d1c.js";import"./index.esm.358e1f0f.js";import"./baseicon.esm.7641c93a.js";import"./basecomponent.esm.bd035da6.js";import"./overlayeventbus.esm.c3088655.js";import"./portal.esm.3511df99.js";import"./index.esm.c455c5d4.js";import"./index.esm.cb187b7f.js";import"./index.esm.f449d5eb.js";import"./index.esm.844658d9.js";const O=""+new URL("logo.04fcd501.jpeg",import.meta.url).href,Q={class:"h-[70px] overflow-hidden flex items-center px-5"},W=s("img",{src:O,class:"h-[70px]",alt:"",srcset:""},null,-1),X={class:"flex text-gray-700 ml-10 text-xl items-end"},Y=s("span",{class:"flex-grow"},null,-1),Z={key:0,class:"flex items-center"},ee={key:1,class:""},te={class:"flex flex-col p-2 px-5 border-b"},se={class:"font-bold"},oe={class:"text-gray-500 text-xs"},ae={class:"text-primary font-bold"},ne={class:"ml-2"},re={key:1,class:"ml-auto border-1 surface-border border-round surface-100 text-xs p-1"},$e={__name:"default",setup(ce){const v=H(),{user:n,connected:p}=F(v);M();const m=P(),d=x(),b=x([{label:"Deconnexion",icon:"pi pi-upload",command:()=>{w()}}]),y=e=>{d.value.toggle(e)};async function k(){try{const e=await $fetch("api/p/status-connexion");e.status?(n.value=e.user,p.value=!0):(n.value={},p.value=!1)}catch{}}async function w(){try{(await $fetch("/api/a/deconnect")).status&&(n.value={},p.value=!1)}catch(e){console.log(e)}}return U(()=>{k()}),(e,u)=>{const _=V,f=z,C=L,$=R,B=S,N=A,T=j("ripple");return r(),c(E,null,[s("div",Q,[W,s("div",X,[o(_,{class:"mr-5 hover:text-gray-800 capitalize",to:"/"},{default:l(()=>[h(" à la mode ")]),_:1}),o(_,{class:"mr-5 hover:text-gray-800",to:"/"},{default:l(()=>[h(" Trouvez des créateurs ")]),_:1})]),Y,a(p)?(r(),c("div",ee,[o(C,{onClick:y,label:a(n).cu_login[0],class:"cursor-pointer",shape:"circle"},null,8,["label"])])):(r(),c("div",Z,[o(f,{onClick:u[0]||(u[0]=t=>a(m).push("/login")),class:"p-button-text text-gray-600 mr-2",label:"Connexion",rounded:""}),o(f,{rounded:"",label:"Inscription",onClick:u[1]||(u[1]=t=>a(m).push("/sign"))})]))]),o(B,{model:a(b),ref_key:"menu",ref:d,popup:!0,class:"w-[200px]"},{start:l(()=>[s("span",te,[s("span",se,i(a(n).cu_login),1),s("span",oe,i(a(n).cu_email),1)])]),submenuheader:l(({item:t})=>[s("span",ae,i(t.label),1)]),item:l(({item:t,props:D})=>[G((r(),c("a",I({class:"flex align-items-center"},D.action),[s("span",{class:J(t.icon)},null,2),s("span",ne,i(t.label),1),t.badge?(r(),K($,{key:0,class:"ml-auto",value:t.badge},null,8,["value"])):g("",!0),t.shortcut?(r(),c("span",re,i(t.shortcut),1)):g("",!0)],16)),[[T]])]),_:1},8,["model"]),q(e.$slots,"default"),o(N)],64)}}};export{$e as default};
