import k from"./button.esm.8409976c.js";import C from"./inlinemessage.esm.592be61d.js";import T from"./inputtext.esm.9166e375.js";import{_ as B}from"./nuxt-link.44ca6038.js";import{v as O,u as E,x as I,r as n,c as S,b as a,q as e,a as t,n as $,w as x,A as U,o as g,d as v,t as L}from"./entry.666009fa.js";import{u as M}from"./global.dfb72d1c.js";import"./badge.esm.6895c8b8.js";import"./basecomponent.esm.bd035da6.js";import"./index.esm.358e1f0f.js";import"./baseicon.esm.7641c93a.js";import"./index.esm.c455c5d4.js";import"./index.esm.cb187b7f.js";import"./index.esm.844658d9.js";const P={class:"h-screen w-screen flex realtive"},R={class:"h-full w-full lg:w-2/3 text-gray-600 bg-gray-50 flex justify-center items-center"},X={class:"flex flex-col w-[300px]"},j=t("span",{class:"w-full text-center mb-5 text-2xl font-bold"}," CONNEXION ",-1),q={class:"flex flex-col mb-5"},A=t("span",{class:""}," Nom d'utilisateur ",-1),D={class:"flex flex-col mb-5"},F=t("span",{class:""}," Mot de passe ",-1),G={class:"text-center"},z=t("div",{class:"h-full w-1/3 bg-gray-100 hidden lg:block"},null,-1),re={__name:"login",setup(H){const h=M(),{user:u,connected:b}=O(h),y=E(),c=I(),o=n({}),d=n(!1),i=n(!1),p=n(!1),m=n("");async function N(){d.value=!0,i.value=!0;try{const l=await $fetch("api/p/login",{method:"POST",body:o.value});l.status?(u.value=l.u,b.value=!0,u.value.cu_type=="crt"?c.push("/cr"):c.push("/")):(p.value=!0,m.value=l.message)}catch{y.add({severity:"error",summary:"Tentative de connexion",detail:"Problème de connexion. Le client n'arrive pas à se connecter",life:3e3})}i.value=!1}return(l,s)=>{const _=k,w=C,f=T,V=B;return g(),S("div",P,[a(_,{icon:"pi pi-times",class:"absolute top-5 right-5",onClick:s[0]||(s[0]=r=>e(c).push("/")),rounded:"","aria-label":"Filter"}),t("div",R,[t("div",X,[j,e(p)&&e(d)?(g(),$(w,{key:0,severity:"info",class:"mb-2"},{default:x(()=>[v(L(e(m)),1)]),_:1})):U("",!0),t("div",q,[A,a(f,{type:"text",modelValue:e(o).cu_login,"onUpdate:modelValue":s[1]||(s[1]=r=>e(o).cu_login=r),placeholder:"Ex : dany12",class:"p-inputtext-sm"},null,8,["modelValue"])]),t("div",D,[F,a(f,{type:"password",modelValue:e(o).cu_pass,"onUpdate:modelValue":s[2]||(s[2]=r=>e(o).cu_pass=r),placeholder:"**********",class:"p-inputtext-sm"},null,8,["modelValue"])]),a(_,{label:"CONNEXION",loading:e(i),class:"p-button-sm mb-5",onClick:N},null,8,["loading"]),t("div",G,[a(V,{to:"/sign",class:"hover:underline text-green-600"},{default:x(()=>[v("S'inscrire")]),_:1})])])]),z])}}};export{re as default};
