import k from"./button.esm.33b0c810.js";import N from"./skeleton.esm.a64293df.js";import{_ as C}from"./nuxt-link.569d12e6.js";import{x as D,v as P,r as m,y as $,c as B,a as e,b as a,q as n,D as F,n as S,A as V,t as f,d as c,w as d,F as A,o as h,_ as j}from"./entry.aac20fd1.js";import{u as z}from"./global.5d70810b.js";import"./badge.esm.75e0f9c7.js";import"./basecomponent.esm.a2d5fbe3.js";import"./index.esm.a9a0ec75.js";import"./baseicon.esm.d13a52ad.js";const R={class:"bg-gray-100 h-[200px] relative"},T={class:"flex mb-5"},q=e("label",{for:"pdp",class:"flex z-50 rounded-full bg-gray-50/30 cursor-pointer absolute bottom-1 right-1 p-1 border border-gray-600"},[e("span",{class:"material-icons"}," edit ")],-1),E={class:"w-[400px] flex items-start p-5"},G={class:"flex flex-col"},I={class:""},L={class:"flex justify-center text-gray-600"},M=e("span",{class:"material-icons text-xs mr-2"}," email ",-1),H=e("span",{class:"flex-grow"},null,-1),J={class:"ml-[10%]"},K={class:"flex h-[30px] border-b text-lg"},ae={__name:"cr",setup(O){const u=D(),g=z(),{user:o,connected:x}=P(g),_=m(!1),p=m({}),b=async t=>{const i=t.target.files,l=new FormData;l.append("file",i[0]);try{const s=await $fetch("/api/a/uploads/file",{method:"post",body:l});s.status?(p.value={im_id:s.file_id,im_ref:s.opt.name},await v()):console.log(s.message)}catch(s){console.log(s)}};$(()=>{console.log(o.value)});async function v(){try{(await $fetch("/api/a/cre/pdp",{method:"post",body:{im:p.value}})).status&&(o.value.im_ref=p.value.im_ref)}catch(t){console.log(t)}}async function y(){_.value=!0;try{(await $fetch("/api/a/deconnect")).status&&(o.value={},x.value=!1,u.push("/"))}catch(t){console.log(t)}_.value=!1}return(t,i)=>{const l=k,s=N,r=C,w=j;return h(),B(A,null,[e("div",R,[a(l,{icon:"pi pi-times",class:"absolute top-5 right-5",onClick:i[0]||(i[0]=Q=>n(u).push("/")),rounded:"","aria-label":"Filter"})]),e("div",T,[e("div",{style:F(`background-image:url(/api/p/media/${n(o).im_ref})`),class:"ml-[10%] im_pdp border-2 relative overflow-hidden flex justify-center items-center -translate-y-1/2 border-black bg-gray-100 rounded-lg w-[100px] h-[100px]"},[n(o).im_ref?V("",!0):(h(),S(s,{key:0,width:"100%",height:"100%",class:"mb-2"})),e("input",{type:"file",onChange:b,class:"hidden",name:"",id:"pdp"},null,32),q],4),e("div",E,[e("div",G,[e("span",I,f(n(o).cu_login),1),e("span",L,[M,c(" "+f(n(o).cu_email),1)])]),H,a(l,{label:"Deconnecter",loading:n(_),class:"p-button-sm p-2",icon:"pi pi-times",onClick:y,severity:"danger",outlined:""},null,8,["loading"])])]),e("div",J,[e("div",K,[a(r,{to:"/cr",class:"menu_dash"},{default:d(()=>[c(" Profil ")]),_:1}),a(r,{to:"/cr/products",class:"menu_dash"},{default:d(()=>[c(" Produits ")]),_:1}),a(r,{to:"/cr/abonnement",class:"menu_dash"},{default:d(()=>[c(" Abonnement ")]),_:1}),a(r,{to:"/cr/notifs",class:"menu_dash"},{default:d(()=>[c(" Notifications ")]),_:1})]),a(w)])],64)}}};export{ae as default};
